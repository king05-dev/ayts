(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,s,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return t}});let t=e=>{}},13689,e=>{"use strict";var s=e.i(43476),r=e.i(71645),t=e.i(28500),a=e.i(73375),l=e.i(99023),n=e.i(7233),d=e.i(75254);let o=(0,d.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var i=e.i(46897);let c=(0,d.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var m=e.i(43432);let x=(0,d.default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),u=(0,d.default)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),h=(0,d.default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),f=(0,d.default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var p=e.i(22016),g=e.i(57688),b=e.i(11536),j=e.i(18566),y=e.i(54858);function N(){let{selectedLocation:e,cartItems:d,updateCartQuantity:N,getCartTotal:v,getCartItemCount:w,clearCart:k}=(0,b.useApp)(),C=(0,j.useRouter)(),[M,P]=(0,r.useState)(!1),[S,O]=(0,r.useState)(!1),[T,I]=(0,r.useState)(!1),[D,z]=(0,r.useState)(null),[A,F]=(0,r.useState)("cod"),[H,B]=(0,r.useState)(null),[L,q]=(0,r.useState)({name:"",phone:"",address:"",notes:""}),E=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{B({lat:e.coords.latitude,lng:e.coords.longitude})},e=>{console.error("Error getting location:",e)})};(0,r.useEffect)(()=>{E()},[]);let U=Object.values(d.reduce((e,s)=>{let r=String(s.storeId);return e[r]||(e[r]={storeId:r,storeName:s.storeName,items:[]}),e[r].items.push(s),e},{})),R=w(),V=v(),Y=(e,s)=>{d.find(s=>s.id===e)&&N(e,s)},_=e=>{let{name:s,value:r}=e.target;q(e=>({...e,[s]:r}))},$=async()=>{if(0!==U.length)try{I(!0);let e=await y.api.createOrder({storeId:U[0].storeId,deliveryAddress:L.address,deliveryInstructions:L.notes,customerName:L.name,customerPhone:L.phone,customerEmail:"",orderNotes:L.notes,paymentMethod:"cash_on_delivery"});e.success&&e.data&&O(!0)}catch(e){console.error("Failed to create order:",e)}finally{I(!1)}},K=L.name&&L.phone&&L.address;return(U.length>0&&U[0].storeName,S)?(0,s.jsxs)("main",{className:"min-h-screen bg-background flex flex-col items-center justify-center px-6",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center mb-6",children:(0,s.jsx)(f,{className:"w-10 h-10 text-primary"})}),(0,s.jsx)("h1",{className:"text-2xl font-extrabold text-foreground mb-2 text-center",children:"Your order has been placed!"}),(0,s.jsx)("p",{className:"text-muted-foreground text-center mb-8 max-w-xs",children:"The store will contact you shortly to confirm your order."}),(0,s.jsxs)("div",{className:"bg-muted/50 rounded-2xl p-5 w-full max-w-sm mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"Order Total"}),(0,s.jsxs)("span",{className:"font-extrabold text-primary text-xl",children:["₱",V+50]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"Delivery To"}),(0,s.jsx)("span",{className:"font-semibold text-foreground text-sm text-right max-w-[180px] truncate",children:L.address})]})]}),(0,s.jsx)("button",{onClick:()=>{k(),O(!1),P(!1),C.push("/categories")},className:"w-full max-w-sm py-4 bg-primary text-primary-foreground font-bold rounded-2xl hover:bg-primary/90 transition-colors shadow-lg shadow-primary/25 flex items-center justify-center",children:"Back to Home"})]}):M?(0,s.jsxs)("main",{className:"min-h-screen bg-background pb-32",children:[(0,s.jsx)("header",{className:"sticky top-0 z-50 bg-background/95 backdrop-blur-md border-b border-border",children:(0,s.jsxs)("div",{className:"px-4 py-4 flex items-center justify-between",children:[(0,s.jsx)("button",{onClick:()=>P(!1),className:"w-10 h-10 rounded-xl bg-muted flex items-center justify-center hover:bg-muted/80 transition-colors",children:(0,s.jsx)(a.ChevronLeft,{className:"w-5 h-5 text-foreground"})}),(0,s.jsx)("h1",{className:"text-lg font-bold text-foreground",children:"Checkout"}),(0,s.jsx)("div",{className:"w-10 h-10"})]})}),(0,s.jsxs)("div",{className:"px-4 py-6",children:[(0,s.jsxs)("div",{className:"bg-muted/50 rounded-2xl p-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center",children:(0,s.jsx)(u,{className:"w-5 h-5 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-foreground",children:"Order Summary"}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[R," items · ₱",V+50]})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[d.slice(0,4).map(e=>(0,s.jsx)("div",{className:"w-12 h-12 rounded-xl overflow-hidden bg-muted",children:(0,s.jsx)(g.default,{src:e.image||"/placeholder.svg",alt:e.name||"Product",width:48,height:48,className:"w-full h-full object-cover"})},e.id)),d.length>4&&(0,s.jsx)("div",{className:"w-12 h-12 rounded-xl bg-muted flex items-center justify-center",children:(0,s.jsxs)("span",{className:"text-xs font-bold text-muted-foreground",children:["+",d.length-4]})})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,s.jsx)("h2",{className:"text-sm font-bold text-foreground uppercase tracking-wide",children:"Delivery Information"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"text-sm font-semibold text-foreground mb-2 flex items-center gap-2",children:[(0,s.jsx)(c,{className:"w-4 h-4 text-primary"}),"Full Name"]}),(0,s.jsx)("input",{type:"text",name:"name",value:L.name,onChange:_,placeholder:"Enter your full name",className:"w-full px-4 py-3.5 bg-muted rounded-xl text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"text-sm font-semibold text-foreground mb-2 flex items-center gap-2",children:[(0,s.jsx)(m.Phone,{className:"w-4 h-4 text-primary"}),"Phone Number"]}),(0,s.jsx)("input",{type:"tel",name:"phone",value:L.phone,onChange:_,placeholder:"e.g., 0912 345 6789",className:"w-full px-4 py-3.5 bg-muted rounded-xl text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"text-sm font-semibold text-foreground mb-2 flex items-center gap-2",children:[(0,s.jsx)(i.MapPin,{className:"w-4 h-4 text-primary"}),"Delivery Address"]}),(0,s.jsx)("textarea",{name:"address",value:L.address,onChange:_,placeholder:"House/Unit No., Street, Barangay, City",rows:3,className:"w-full px-4 py-3.5 bg-muted rounded-xl text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all resize-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"text-sm font-semibold text-foreground mb-2 flex items-center gap-2",children:[(0,s.jsx)(x,{className:"w-4 h-4 text-primary"}),"Order Notes",(0,s.jsx)("span",{className:"text-muted-foreground font-normal",children:"(Optional)"})]}),(0,s.jsx)("textarea",{name:"notes",value:L.notes,onChange:_,placeholder:"Any special instructions for your order...",rows:2,className:"w-full px-4 py-3.5 bg-muted rounded-xl text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all resize-none"})]})]}),(0,s.jsxs)("div",{className:"mt-8 bg-card rounded-2xl border border-border p-5",children:[(0,s.jsx)("h3",{className:"font-bold text-foreground mb-4",children:"Price Details"}),(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Subtotal"}),(0,s.jsxs)("span",{className:"font-semibold text-foreground",children:["₱",V]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Delivery Fee"}),(0,s.jsx)("span",{className:"font-semibold text-foreground",children:"₱50.00"})]}),(0,s.jsx)("div",{className:"h-px bg-border my-1"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"font-bold text-foreground",children:"Total"}),(0,s.jsxs)("span",{className:"text-xl font-extrabold text-primary",children:["₱",V+50]})]})]})]})]}),(0,s.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-50 px-4 pb-6 pt-4 bg-gradient-to-t from-background via-background to-transparent",children:(0,s.jsxs)("button",{onClick:()=>{L.name&&L.phone&&L.address&&$()},disabled:!K,className:`w-full py-4 font-bold rounded-2xl transition-all shadow-lg flex items-center justify-center gap-2 ${K?"bg-primary text-primary-foreground hover:bg-primary/90 shadow-primary/25":"bg-muted text-muted-foreground cursor-not-allowed"}`,children:[(0,s.jsx)("span",{children:"Place Order"}),(0,s.jsxs)("span",{className:"font-extrabold",children:["· ₱",V+50]})]})})]}):(0,s.jsxs)("main",{className:"min-h-screen bg-background pb-48",children:[(0,s.jsx)("header",{className:"sticky top-0 z-50 bg-background/95 backdrop-blur-md border-b border-border",children:(0,s.jsxs)("div",{className:"px-4 py-4 flex items-center justify-between",children:[(0,s.jsx)(p.default,{href:U.length>0?`/stores/${U[0].storeId}`:"/stores",className:"w-10 h-10 rounded-xl bg-muted flex items-center justify-center hover:bg-muted/80 transition-colors",children:(0,s.jsx)(a.ChevronLeft,{className:"w-5 h-5 text-foreground"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(t.AYTSLogo,{className:"w-7 h-7"}),(0,s.jsx)("span",{className:"text-lg font-bold text-foreground",children:"My Cart"})]}),(0,s.jsx)("div",{className:"w-10 h-10"})]})}),0===d.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center px-6 py-20",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-full bg-muted flex items-center justify-center mb-6",children:(0,s.jsx)(u,{className:"w-10 h-10 text-muted-foreground"})}),(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground mb-2",children:"Your cart is empty"}),(0,s.jsx)("p",{className:"text-muted-foreground text-center mb-6",children:"Add items from stores to get started"}),(0,s.jsx)(p.default,{href:"/stores",className:"px-6 py-3 bg-primary text-primary-foreground font-bold rounded-xl hover:bg-primary/90 transition-colors",children:"Browse Stores"})]}):(0,s.jsxs)(s.Fragment,{children:[U.map(e=>(0,s.jsx)("div",{className:"px-4 py-4",children:(0,s.jsxs)("div",{className:"bg-card rounded-2xl border border-border shadow-sm p-4",children:[(0,s.jsxs)(p.default,{href:`/stores/${e.storeId}`,className:"flex items-center gap-3 mb-4 hover:opacity-80 transition-opacity",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center",children:(0,s.jsx)(u,{className:"w-5 h-5 text-primary"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-bold text-foreground text-lg",children:e.storeName}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Your neighborhood store"})]}),(0,s.jsx)(h,{className:"w-5 h-5 text-muted-foreground"})]}),(0,s.jsx)("div",{className:"space-y-3",children:e.items.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-background rounded-xl",children:[(0,s.jsx)(g.default,{src:e.image,alt:e.name,width:60,height:60,className:"rounded-lg object-cover"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-semibold text-foreground",children:e.name}),(0,s.jsxs)("p",{className:"text-primary font-bold",children:["₱",e.price]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>Y(e.id,-1),className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center hover:bg-muted/80 transition-colors",children:(0,s.jsx)(l.Minus,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"w-8 text-center font-semibold",children:e.quantity}),(0,s.jsx)("button",{onClick:()=>Y(e.id,1),className:"w-8 h-8 rounded-full bg-primary text-primary-foreground flex items-center justify-center hover:bg-primary/90 transition-colors",children:(0,s.jsx)(n.Plus,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>{var s;let r;return s=e.id,void((r=d.find(e=>e.id===s))&&N(s,-r.quantity))},className:"w-8 h-8 rounded-full bg-red-100 text-red-600 flex items-center justify-center hover:bg-red-200 transition-colors ml-2",children:(0,s.jsx)(o,{className:"w-4 h-4"})})]})]},e.id))})]})},e.storeId)),(0,s.jsx)("div",{className:"px-4 py-4",children:(0,s.jsxs)("div",{className:"bg-card rounded-2xl border border-border shadow-sm p-4",children:[(0,s.jsxs)("h3",{className:"font-bold text-foreground mb-3 flex items-center gap-2",children:[(0,s.jsx)(i.MapPin,{className:"w-5 h-5 text-primary"}),"Delivery Location"]}),H?(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(f,{className:"w-4 h-4 text-green-600"}),(0,s.jsxs)("span",{children:["Location found: ",H.lat.toFixed(4),", ",H.lng.toFixed(4)]}),(0,s.jsx)("button",{onClick:E,className:"ml-auto px-3 py-1 bg-primary text-primary-foreground text-xs rounded-full hover:bg-primary/90 transition-colors",children:"Update PIN"})]}):(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,s.jsx)(i.MapPin,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Getting your location..."}),(0,s.jsx)("button",{onClick:E,className:"ml-auto px-3 py-1 bg-muted text-foreground text-xs rounded-full hover:bg-muted/80 transition-colors",children:"Enable Location"})]})]})}),(0,s.jsx)("div",{className:"px-4 py-4",children:(0,s.jsxs)("div",{className:"bg-card rounded-2xl border border-border shadow-sm p-4",children:[(0,s.jsx)("h3",{className:"font-bold text-foreground mb-3",children:"Payment Method"}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsxs)("label",{className:"flex items-center gap-3 p-3 bg-background rounded-xl cursor-pointer hover:bg-muted/50 transition-colors",children:[(0,s.jsx)("input",{type:"radio",name:"payment",value:"cod",checked:"cod"===A,onChange:e=>F(e.target.value),className:"w-4 h-4 text-primary"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-semibold text-foreground",children:"Cash on Delivery (COD)"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pay when your order arrives"})]}),(0,s.jsx)(f,{className:"w-5 h-5 text-green-600"})]})})]})}),(0,s.jsx)("div",{className:"px-4 py-4",children:(0,s.jsxs)("div",{className:"bg-card rounded-2xl border border-border shadow-sm p-4",children:[(0,s.jsx)("h3",{className:"font-bold text-foreground mb-3",children:"Order Summary"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("span",{children:["Subtotal (",R," items)"]}),(0,s.jsxs)("span",{children:["₱",V]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Delivery Fee"}),(0,s.jsx)("span",{children:"₱50.00"})]}),(0,s.jsxs)("div",{className:"border-t pt-2 flex justify-between font-bold text-lg",children:[(0,s.jsx)("span",{children:"Total"}),(0,s.jsxs)("span",{children:["₱",V+50]})]})]})]})})]})]})}e.s(["default",()=>N],13689)}]);